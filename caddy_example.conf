# Caddy Server Configuration Example
# Place this in /etc/caddy/Caddyfile
# Reload with: sudo systemctl reload caddy

yoursite.com {
    root * /var/www/yoursite
    index index.html index.php
    
    # Security: Block access to config.php
    @block_config {
        path /config.php
    }
    respond @block_config 403
    
    # Allow secure-mail-handler.php
    @allow_secure {
        path /secure-mail-handler.php
    }
    php_fastcgi @allow_secure unix//var/run/php/php8.1-fpm.sock
    
    # Handle other PHP files
    php_fastcgi unix//var/run/php/php8.1-fpm.sock
    
    # Security headers
    header {
        X-Content-Type-Options nosniff
        X-Frame-Options DENY
        X-XSS-Protection "1; mode=block"
        Referrer-Policy "strict-origin-when-cross-origin"
        -Server
    }
    
    # Enable HTTPS automatically
    tls your-email@yoursite.com
}
